/*! For license information please see main.022defba.chunk.js.LICENSE.txt */
(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{12:function(e,t,a){e.exports={"game-container":"gameControllerStyles_game-container__1kRNe",player:"gameControllerStyles_player__1Ae0B",winnerPanel:"gameControllerStyles_winnerPanel__8tltV",restart:"gameControllerStyles_restart__23Pzu"}},14:function(e,t,a){e.exports={title:"headerStyles_title__1wRWs",disc_div:"headerStyles_disc_div__2tlVB"}},21:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var i=a(2),n=a.n(i),s=a(15),r=a.n(s),o=(a(21),a(8)),l=a(6),c=a(7),h=a(3),u=a(10),d=a(9),p=a(4),m=a.n(p),b=a(1),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={},i}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.isGameOver,i=e.player,n=e.dimension,s=e.changeDimension,r=e.shipsPositioned,o=e.turn;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{className:m.a.title,children:t}),!a&&("Human"===i.playerName?Object(b.jsxs)("div",{className:m.a.panel,children:[5!==r?Object(b.jsx)("p",{className:m.a.prompt,children:"position your ships"}):Object(b.jsx)("p",{className:m.a.prompt,children:"Attack Computer's Board"}),5!==r?Object(b.jsxs)("div",{children:[Object(b.jsxs)("button",{className:m.a.btn,onClick:function(){s()},children:["Dimension : ",n," "]}),Object(b.jsxs)("p",{className:m.a.pill,children:["ships left to place: ",5-r]})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:m.a["turn-pill"],children:"Human"===o?"your turn":"waiting.."}),Object(b.jsxs)("p",{className:m.a.pill,children:["Ships Remaining: ",5-i.playerBoard.sunkShips.length]})]})]}):Object(b.jsxs)("div",{className:m.a.panel,children:[5!==r?Object(b.jsx)("p",{className:m.a.prompt,children:"waiting..."}):Object(b.jsx)("p",{className:m.a.prompt,children:"click on this board to sink their ships"}),5!==r?Object(b.jsx)("div",{children:"waiting for you to position your ships"}):Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{className:m.a["turn-pill"],children:"Human"===o?"your turn":"waiting.."}),Object(b.jsxs)("p",{className:m.a.pill,children:["Ships Remaining: ",5-i.playerBoard.sunkShips.length]})]})]}))]})}}]),a}(i.Component),f=a(16),y=a(12),j=a.n(y),O=a(11),k=a(5),g=a.n(k),w=a(23),_=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={},i.boardRef=n.a.createRef(),i.renderMisses=i.renderMisses.bind(Object(h.a)(i)),i.renderHits=i.renderHits.bind(Object(h.a)(i)),i.renderSunkShips=i.renderSunkShips.bind(Object(h.a)(i)),i.showPreview=i.showPreview.bind(Object(h.a)(i)),i}return Object(c.a)(a,[{key:"renderMisses",value:function(){var e=this;this.props.player.playerBoard.misses.forEach((function(t){var a=e.boardRef.current;(a=a.children[t].firstElementChild).classList.add(g.a.miss)}))}},{key:"renderHits",value:function(){var e=this;this.props.player.playerBoard.hits.forEach((function(t){var a=e.boardRef.current;(a=a.children[t].firstElementChild).classList.add(g.a.hit)}))}},{key:"renderSunkShips",value:function(){var e=this;this.props.player.playerBoard.sunkShips.forEach((function(t){var a,i=Object(o.a)(t);try{for(i.s();!(a=i.n()).done;){var n=a.value,s=e.boardRef.current;(s=s.children[n].firstElementChild).classList.add(g.a.sunk)}}catch(r){i.e(r)}finally{i.f()}}))}},{key:"showPreview",value:function(){var e=this,t=this.boardRef.current.children;(t=Array.from(t)).forEach((function(t,a){e.props.previewState.previewArray.includes(a)?t.firstElementChild.classList.toggle(g.a.preview,!0):t.firstElementChild.classList.toggle(g.a.preview,!1)}))}},{key:"componentDidMount",value:function(){"Computer"===this.props.player.playerName&&this.props.randoPlacement()}},{key:"componentDidUpdate",value:function(){var e=this;if("Human"===this.props.player.playerName){var t,a=Object(o.a)(this.props.player.playerBoard.fleet);try{for(a.s();!(t=a.n()).done;){t.value.coordinates.forEach((function(t){var a=e.boardRef.current;(a=a.children[t].firstElementChild).classList.add(g.a.ship)}))}}catch(i){a.e(i)}finally{a.f()}}this.renderMisses(),this.renderHits(),this.renderSunkShips(),"Human"===this.props.player.playerName&&this.showPreview(this.props.previewState),console.log(this.props.player.playerBoard.fleet)}},{key:"render",value:function(){var e=this.props,t=e.player,a=e.clickHandler,i=e.dimension,n=e.setPreview,s=e.resetPreview,r=e.playerPlacement;return"Human"===t.playerName?Object(b.jsx)("div",{ref:this.boardRef,id:t.playerName+"-board",className:w(g.a["game-board"],"board"),onMouseOut:function(){s()},children:t.playerBoard.board.map((function(e,a){return Object(b.jsx)("div",{id:e,className:g.a.block,children:Object(b.jsx)("button",{className:g.a.btn,onClick:function(){r()},onMouseOver:function(){n({position:a,dimension:i})},children:t.playerBoard.misses.includes(a)&&Object(b.jsx)(O.c,{})||t.playerBoard.sunkShips.find((function(e){return e.includes(a)}))&&Object(b.jsx)(O.b,{})||t.playerBoard.hits.includes(a)&&Object(b.jsx)(O.a,{})})},e+a)}))}):Object(b.jsx)("div",{ref:this.boardRef,id:t.playerName+"-board",className:w(g.a["game-board"],"board"),children:t.playerBoard.board.map((function(e,i){return Object(b.jsx)("div",{id:e,className:g.a.block,children:Object(b.jsx)("button",{className:g.a.btn,onClick:function(e){a(e.target,i)},children:t.playerBoard.misses.includes(i)&&Object(b.jsx)(O.c,{})||t.playerBoard.sunkShips.find((function(e){return e.includes(i)}))&&Object(b.jsx)(O.b,{})||t.playerBoard.hits.includes(i)&&Object(b.jsx)(O.a,{})})},e+i)}))})}}]),a}(i.Component),B=function(){function e(t){Object(l.a)(this,e);this.length=t,this.shipStructure=new Array(t).fill(null),this.shipClass=function(e){var t;switch(e){case 5:t="carrier";break;case 4:t="battleship";break;case 3:t="submarine";break;default:t="destroyer"}return t}(this.length)}return Object(c.a)(e,[{key:"hit",value:function(e){return e>=0&&e<=this.length-1&&(this.shipStructure[e]="hit",!0)}},{key:"getStructuralIntegrityAt",value:function(e){return this.shipStructure[e]}},{key:"isSunk",value:function(){return this.shipStructure.every((function(e){return"hit"===e}))}}]),e}(),S=[new B(5),new B(4),new B(3),new B(2),new B(2)],x=[new B(5),new B(4),new B(3),new B(2),new B(2)],P=function(){function e(){Object(l.a)(this,e),this.board=["1A","1B","1C","1D","1E","1F","1G","1H","1I","1J","2A","2B","2C","2D","2E","2F","2G","2H","2I","2J","3A","3B","3C","3D","3E","3F","3G","3H","3I","3J","4A","4B","4C","4D","4E","4F","4G","4H","4I","4J","5A","5B","5C","5D","5E","5F","5G","5H","5I","5J","6A","6B","6C","6D","6E","6F","6G","6H","6I","6J","7A","7B","7C","7D","7E","7F","7G","7H","7I","7J","8A","8B","8C","8D","8E","8F","8G","8H","8I","8J","9A","9B","9C","9D","9E","9F","9G","9H","9I","9J","10A","10B","10C","10D","10E","10F","10G","10H","10I","10J"],this.fleet=[],this.hits=[],this.misses=[],this.sunkShips=[]}return Object(c.a)(e,[{key:"placeShip",value:function(e,t){var a=[],i=this.board.indexOf(t.position);if("vertical"===t.dimension){if(i+10*(e.length-1)>99)return"pick different coordinates";for(;a.length!==e.length;)a.push(i),i+=10}else if("horizontal"===t.dimension){var n=10*(parseInt(i/10,10)+1);if(n-=1,i+e.length-1>n)return"pick different coordinates";for(;a.length!==e.length;)a.push(i),i+=1}if(this.isShared(a))return"you have shared coordinates";e.coordinates=a,this.fleet.push(e)}},{key:"isShared",value:function(e){var t=this,a=!1;return e.forEach((function(e){var i,n=Object(o.a)(t.fleet);try{for(n.s();!(i=n.n()).done;){i.value.coordinates.includes(e)&&(a=!0)}}catch(s){n.e(s)}finally{n.f()}})),a}},{key:"receiveAttack",value:function(e){var t,a=this.board.indexOf(e),i=!1,n=Object(o.a)(this.fleet);try{for(n.s();!(t=n.n()).done;){var s=t.value;if(s.coordinates.includes(a)){var r=s.coordinates.indexOf(a);s.hit(r),this.hits.push(a),i=!0,s.isSunk()&&this.sunkShips.push(s.coordinates)}}}catch(l){n.e(l)}finally{n.f()}i||this.misses.push(a)}},{key:"isFleetSunk",value:function(){return this.fleet.every((function(e){return!0===e.isSunk()}))}}]),e}(),C=function e(t,a){Object(l.a)(this,e),this.playerName=t,this.playerBoard=a},H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={human:new C("Human",new P),computer:new C("Computer",new P),gameOver:!1,turn:"Human",dimension:"horizontal",preview:{previewArray:[],isPreviewValid:null},shipsPositioned:0},i.randomPlacement=i.randomPlacement.bind(Object(h.a)(i)),i.clickHandler=i.clickHandler.bind(Object(h.a)(i)),i.compsTurn=i.compsTurn.bind(Object(h.a)(i)),i.isGameOver=i.isGameOver.bind(Object(h.a)(i)),i.changeTurn=i.changeTurn.bind(Object(h.a)(i)),i.disableButtons=i.disableButtons.bind(Object(h.a)(i)),i.enableButtons=i.enableButtons.bind(Object(h.a)(i)),i.changeDimension=i.changeDimension.bind(Object(h.a)(i)),i.setPreview=i.setPreview.bind(Object(h.a)(i)),i.resetPreview=i.resetPreview.bind(Object(h.a)(i)),i.playerPlacement=i.playerPlacement.bind(Object(h.a)(i)),i}return Object(c.a)(a,[{key:"playAgain",value:function(){this.setState({})}},{key:"changeTurn",value:function(){this.setState({turn:"Human"===this.state.turn?"Computer":"Human"})}},{key:"playerPlacement",value:function(){var e=this.state.preview;if(e.isPreviewValid&&5!==this.state.shipsPositioned){var t=x[this.state.shipsPositioned];t.coordinates=e.previewArray;var a=Object.assign({},this.state.human);a.playerBoard.fleet.push(t),this.setState({human:a}),this.setState((function(e){return{shipsPositioned:e.shipsPositioned+1}}))}console.log(this.state.human)}},{key:"randomPlacement",value:function(){for(var e=Object.assign({},this.state.computer),t=e.playerBoard.board,a=0,i=0;5!==a;){var n=t[Math.round(99*Math.random())],s=Math.round(1*Math.random());s=s?"horizontal":"vertical",e.playerBoard.placeShip(S[i],{position:n,dimension:s}),this.setState({computer:e}),this.state.computer.playerBoard.fleet.length>i&&(i+=1,a+=1)}}},{key:"clickHandler",value:function(e,t){var a=this;console.log(this.state);var i=this.state.computer;if(5===this.state.shipsPositioned){if(i.playerBoard.misses.includes(t)||i.playerBoard.hits.includes(t))return console.log("You've already picked these coordinates homes. Try different ones.");var n=e.parentElement.id;if(this.setState({player:i.playerBoard.receiveAttack(n)}),this.isGameOver(i))this.setState({gameOver:!0}),console.log("game over Human guy wins");else{var s=e.parentElement.parentElement.querySelectorAll("button");this.disableButtons(s),this.changeTurn(),setTimeout((function(){a.compsTurn(a.state.human),a.enableButtons(s)}),1e3)}}}},{key:"compsTurn",value:function(e){for(var t=Math.round(99*Math.random());e.playerBoard.misses.includes(t)||e.playerBoard.hits.includes(t);)t=Math.round(99*Math.random());var a=e.playerBoard.board[t];this.setState({player:e.playerBoard.receiveAttack(a)}),this.isGameOver(e)?this.setState({gameOver:!0}):this.changeTurn()}},{key:"disableButtons",value:function(e){var t,a=Object(o.a)(e);try{for(a.s();!(t=a.n()).done;){t.value.setAttribute("disabled",!0)}}catch(i){a.e(i)}finally{a.f()}}},{key:"enableButtons",value:function(e){var t,a=Object(o.a)(e);try{for(a.s();!(t=a.n()).done;){t.value.removeAttribute("disabled")}}catch(i){a.e(i)}finally{a.f()}}},{key:"isGameOver",value:function(e){return e.playerBoard.isFleetSunk()}},{key:"changeDimension",value:function(){this.setState((function(e){return{dimension:"horizontal"===e.dimension?"vertical":"horizontal"}}))}},{key:"setPreview",value:function(e){if(5!==this.state.shipsPositioned){var t=S[this.state.shipsPositioned],a=e.position,i=[],n=!0;if("vertical"===e.dimension){var s=a+10*(t.length-1);s>99&&(n=!1);for(var r=a;r<=s&&(i.push(r),!(r>=99));r+=10);}else if("horizontal"===e.dimension){var l=10*(parseInt(a/10,10)+1);l-=1;var c=a+t.length-1;c>l&&(n=!1);for(var h=a;h<=c&&(i.push(h),!(h>=l));h++);}for(var u=this.state.human.playerBoard.fleet,d=0,p=i;d<p.length;d++){var m,b=p[d],v=Object(o.a)(u);try{for(v.s();!(m=v.n()).done;){m.value.coordinates.includes(b)&&(n=!1)}}catch(f){v.e(f)}finally{v.f()}}this.setState({preview:{previewArray:i,isPreviewValid:n}})}}},{key:"resetPreview",value:function(){this.setState({preview:{previewArray:[],isPreviewValid:null}})}},{key:"componentDidUpdate",value:function(){if(console.log("did update"),this.state.gameOver){var e=document.querySelectorAll(".board button");this.disableButtons(e)}}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[this.state.gameOver&&Object(b.jsxs)("div",{className:j.a.winnerPanel,children:[Object(b.jsxs)("h1",{children:["Winner is ",this.state.turn]}),Object(b.jsxs)("button",{className:j.a.restart,children:[Object(b.jsx)(f.a,{}),"Restart"]})]}),Object(b.jsxs)("div",{className:j.a["game-container"],children:[Object(b.jsxs)("div",{className:j.a.player,children:[Object(b.jsx)(v,{title:"Human",isGameOver:this.state.gameOver,player:this.state.human,dimension:this.state.dimension,changeDimension:this.changeDimension,shipsPositioned:this.state.shipsPositioned,turn:this.state.turn}),Object(b.jsx)(_,{player:this.state.human,clickHandler:this.clickHandler,dimension:this.state.dimension,setPreview:this.setPreview,previewState:this.state.preview,resetPreview:this.resetPreview,playerPlacement:this.playerPlacement,compsTurn:this.compsTurn})]}),Object(b.jsxs)("div",{className:j.a.player,children:[Object(b.jsx)(v,{title:"Super-Computer",isGameOver:this.state.gameOver,player:this.state.computer,shipsPositioned:this.state.shipsPositioned}),Object(b.jsx)(_,{player:this.state.computer,randoPlacement:this.randomPlacement,clickHandler:this.clickHandler})]})]})]})}}]),a}(i.Component),N=a(14),A=a.n(N),E=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h1",{className:A.a.title,children:"Battleship_"}),Object(b.jsx)("div",{className:A.a.disc_div,children:Object(b.jsx)("p",{children:"Feel the authentic thrill of the battle when you wage war on the high seas in the game of Battleship. Take charge and command your own fleet to defeat the enemy."})})]})}}]),a}(i.Component);var D=function(){return Object(b.jsxs)("div",{id:"app-container",children:[Object(b.jsx)(E,{}),Object(b.jsx)(H,{})]})},G=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,25)).then((function(t){var a=t.getCLS,i=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),i(e),n(e),s(e),r(e)}))};r.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),G()},4:function(e,t,a){e.exports={title:"playerStatus_title__KN9KP",panel:"playerStatus_panel__2XWuH",prompt:"playerStatus_prompt__3tg6X",btn:"playerStatus_btn__28vGk",pill:"playerStatus_pill__3X5_y","turn-pill":"playerStatus_turn-pill__3z9vu"}},5:function(e,t,a){e.exports={"game-board":"playerBoard_game-board__1u8TC",block:"playerBoard_block__2XyRn",btn:"playerBoard_btn__Bwbv_",ship:"playerBoard_ship__2Uiyj",miss:"playerBoard_miss__1L8LF",hit:"playerBoard_hit__GwBGl",sunk:"playerBoard_sunk__1H91D",preview:"playerBoard_preview__2RnSw"}}},[[24,1,2]]]);
//# sourceMappingURL=main.022defba.chunk.js.map